{"version":3,"sources":["constants.js","index.js"],"names":["dotNumberKey","minNum","maxNum","defaultNum","currency","document","querySelector","usedCurrenciesKey","inputEl","getBtn","clearBtn","resEl","fromEl","toEl","burger","reverse","saveDefaultBtn","defaultFrom","defaultTo","saveDotBtn","dotNumberInput","addCurrencySelect","saveAddCurrencyBtn","setInitialCurrenciesBtn","isFromAttr","isToAttr","apiGetAll","apiGetValue","initialUsedCurrencies","id","currencyName","name","allCurrencies","initialize","initNotification","initListeners","setCurrenciesSelectors","setDefaultDot","setAllCurrencies","Notification","requestPermission","status","console","log","addEventListener","getCurrency","clear","toggleMenu","toggleCurrency","saveDefaultHandler","saveDotNumber","saveAddCurrency","setInitialCurrencies","clearSelectors","setSelectors","innerHTML","data","getData","appendChild","getMountedOptions","selectPosition","isShort","fromVal","value","toVal","query","getQuery","fetch","then","resp","json","rate","item","val","navigator","onLine","displayNotification","calculate","catch","err","innerText","num","Number","numDotStored","numDot","Math","round","pow","focus","activeClass","body","classList","contains","remove","add","firstIndex","selectedIndex","secondIndex","selected","itemFrom","itemTo","text","permission","serviceWorker","getRegistration","reg","showNotification","firstValue","secondValue","forEach","saveData","key","localStorage","setItem","JSON","stringify","getItem","parse","res","mountAllCurrencies","results","mountedOptions","filterAlreadyExist","usedCurrencies","Object","keys","filter","length","settings","options","map","createOption","sort","a","b","dataset","wrapper","createDocumentFragment","el","createElement","newCurrency","newCurrencies","push"],"mappings":"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","file":"index.map","sourceRoot":"../src","sourcesContent":["export const dotNumberKey = 'dotNumber';\nexport const minNum = 0;\nexport const maxNum = 5;\nexport const defaultNum = 2;\nexport const currency = document.querySelector('.currency');\nexport const usedCurrenciesKey = 'usedCurrency';\nexport const inputEl = currency.querySelector('.input');\nexport const getBtn = currency.querySelector('.get');\nexport const clearBtn = currency.querySelector('.clear');\nexport const resEl = currency.querySelector('.result');\nexport const fromEl = currency.querySelector('.select-from');\nexport const toEl = currency.querySelector('.select-to');\nexport const burger = currency.querySelector('.menu');\nexport const reverse = currency.querySelector('.reverse');\nexport const saveDefaultBtn = currency.querySelector('.save-default');\nexport const defaultFrom = currency.querySelector('.default-from');\nexport const defaultTo = currency.querySelector('.default-to');\nexport const saveDotBtn = currency.querySelector('.save-dot-number');\nexport const dotNumberInput = currency.querySelector('.dot-number');\nexport const addCurrencySelect = currency.querySelector('.add-currency-select');\nexport const saveAddCurrencyBtn = currency.querySelector('.save-add-currency');\nexport const setInitialCurrenciesBtn = currency.querySelector('.set-initial-btn');\nexport const isFromAttr = 'isFrom';\nexport const isToAttr = 'isTo';\nexport const apiGetAll = 'https://free.currencyconverterapi.com/api/v6/currencies';\nexport const apiGetValue = 'https://free.currencyconverterapi.com/api/v5/convert';\nexport const initialUsedCurrencies = [\n\t{id: 'PLN', currencyName: 'Polish Zloty', name: 'Polish Zloty', [isFromAttr]:true},\n\t{id: 'EUR', currencyName: 'Euro', name: 'Euro'},\n\t{id: 'USD', currencyName: 'United States Dollar', name: 'United States Dollar'},\n\t{id: 'UAH', currencyName: 'Ukrainian Hryvnia', name: 'Ukrainian Hryvnia', [isToAttr]:true},\n\t{id: 'RUB', currencyName: 'Russian Ruble', name: 'Russian Ruble'}\n]","import {\n\tdotNumberKey, minNum, maxNum, defaultNum, usedCurrenciesKey,\n\tinputEl, getBtn, clearBtn, resEl, fromEl, toEl,\tburger, reverse,\n\tsaveDefaultBtn,\tdefaultFrom, defaultTo,\tsaveDotBtn,\tdotNumberInput,\n\taddCurrencySelect, saveAddCurrencyBtn,\tsetInitialCurrenciesBtn,\n\tisFromAttr,\tisToAttr, apiGetAll, apiGetValue, initialUsedCurrencies\n} from './constants';\n\nlet allCurrencies;\n\ninitialize();\n\nfunction initialize() {\n\tinitNotification();\n\tinitListeners();\n\tsetCurrenciesSelectors();\n\tsetDefaultDot();\n\tsetAllCurrencies();\n};\n\nfunction initNotification() {\n\tif (typeof(Notification) === 'undefined') {\n\t\treturn;\n\t}\n\tNotification.requestPermission(function(status) {\n\t\tconsole.log('Notification permission status:', status);\n\t});\n}\n\nfunction initListeners() {\n\tgetBtn.addEventListener('click', getCurrency);\n\tclearBtn.addEventListener('click', clear);\n\tburger.addEventListener('click', toggleMenu);\n\treverse.addEventListener('click', toggleCurrency);\n\tsaveDefaultBtn.addEventListener('click', saveDefaultHandler);\n\tsaveDotBtn.addEventListener('click', saveDotNumber);\n\tsaveAddCurrencyBtn.addEventListener('click', saveAddCurrency);\n\tsetInitialCurrenciesBtn.addEventListener('click', setInitialCurrencies);\n}\n\nfunction setCurrenciesSelectors() {\n\tclearSelectors();\n\tsetSelectors();\n}\n\nfunction clearSelectors() {\n\tfromEl.innerHTML = '';\n\ttoEl.innerHTML = '';\n\tdefaultFrom.innerHTML = '';\n\tdefaultTo.innerHTML = '';\n}\n\nfunction setSelectors() {\n\tconst data = getData(usedCurrenciesKey) || initialUsedCurrencies;\n\n\tfromEl.appendChild(getMountedOptions(data, {selectPosition: isFromAttr, isShort: true}));\n\ttoEl.appendChild(getMountedOptions(data, {selectPosition: isToAttr, isShort: true}));\n\tdefaultFrom.appendChild(getMountedOptions(data, {selectPosition: isFromAttr, isShort: true}));\n\tdefaultTo.appendChild(getMountedOptions(data, {selectPosition: isToAttr, isShort: true}));\n}\n\nfunction getCurrency() {\n\tconst fromVal = fromEl.value;\n\tconst toVal = toEl.value;\n\tconst query = getQuery(fromVal, toVal);\n\n\tif (fromVal === toVal) {\n\t\tcalculate(1);\n\t\treturn;\n\t}\n\n\tfetch(query)\n\t\t.then(resp => {return resp.json()})\n\t\t.then(data => {\n\t\t\tlet rate = 1;\n\n\t\t\tfor (let item in data) {\n\t\t\t\trate = data[item].val;\n\t\t\t}\n\t\t\tif (!navigator.onLine) {\n\t\t\t\tdisplayNotification('Application works offline');\n\t\t\t}\n\t\t\tcalculate(rate);\n\t\t})\n\t\t.catch(err => resEl.innerText = `Some problems with request - ${err}`);\n}\n\nfunction calculate(rate) {\n\tconst num = Number(inputEl.value);\n\tconst numDotStored = getData(dotNumberKey);\n\tconst numDot = numDotStored !== null ? numDotStored : defaultNum;\n\n\tresEl.innerText = Math.round(rate * num * Math.pow(10, numDot)) / Math.pow(10, numDot);\n}\n\nfunction clear() {\n\tinputEl.value = '';\n\tresEl.innerText = '';\n\tinputEl.focus();\n}\n\nfunction toggleMenu() {\n\tconst activeClass = '_burger-active';\n\tconst body = document.body;\n\n\tif (body.classList.contains(activeClass)) {\n\t\tbody.classList.remove(activeClass);\n\t} else {\n\t\tbody.classList.add(activeClass);\n\t}\n}\n\nfunction toggleCurrency() {\n\tconst firstIndex = fromEl.selectedIndex;\n\tconst secondIndex = toEl.selectedIndex;\n\n\tfromEl[secondIndex].selected = true;\n\ttoEl[firstIndex].selected = true;\n}\n\nfunction getQuery(itemFrom, itemTo) {\n\treturn `${apiGetValue}?q=${itemFrom}_${itemTo}&compact=y`;\n}\n\nfunction displayNotification(text) {\n    if (Notification.permission == 'granted') {\n        navigator.serviceWorker.getRegistration().then(function(reg) {\n            reg.showNotification(text);\n        });\n    }\n}\n\nfunction saveDefaultHandler() {\n\tconst firstValue = defaultFrom[defaultFrom.selectedIndex].id;\n\tconst secondValue = defaultTo[defaultTo.selectedIndex].id;\n\tconst data = getData(usedCurrenciesKey) || initialUsedCurrencies;\n\n\tdata.forEach(item => {\n\t\tconst id = item.id\n\n\t\titem[isFromAttr] = false;\n\t\titem[isToAttr] = false;\n\n\t\tif (id === firstValue) {\n\t\t\titem[isFromAttr] = true;\n\t\t}\n\n\t\tif (id === secondValue) {\n\t\t\titem[isToAttr] = true;\n\t\t}\n\t});\n\tsaveData(usedCurrenciesKey, data);\n\tsetCurrenciesSelectors();\n\ttoggleMenu();\n}\n\nfunction saveData(key, value) {\n\tlocalStorage.setItem(key, JSON.stringify(value));\n}\n\nfunction getData(key) {\n\tconst data = localStorage.getItem(key);\n\n\treturn JSON.parse(data);\n}\n\nfunction setDefaultDot() {\n\tconst data = getData(dotNumberKey);\n\n\tdotNumberInput.value = data !== null ? data : defaultNum;\n}\n\nfunction saveDotNumber() {\n\tconst value = Number(dotNumberInput.value);\n\tconst num = (value < minNum || value > maxNum) ? defaultNum : value;\n\n\tsaveData(dotNumberKey, num);\n\ttoggleMenu();\n}\n\nfunction setAllCurrencies() {\n\tfetch(apiGetAll)\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tallCurrencies = data.results;\n\t\t\tmountAllCurrencies(allCurrencies);\n\t\t})\n}\n\nfunction mountAllCurrencies(data=allCurrencies) {\n\tconst filteredData = filterAlreadyExist(data);\n\tconst mountedOptions = getMountedOptions(filteredData);\n\n\taddCurrencySelect.innerHTML = '';\n\taddCurrencySelect.appendChild(mountedOptions);\n}\n\nfunction filterAlreadyExist(data) {\n\tconst usedCurrencies = getData(usedCurrenciesKey) || initialUsedCurrencies;\n\tconst res = {};\n\n\tObject.keys(data).forEach(item => {\n\t\tconst id = data[item].id;\n\t\tif (usedCurrencies.filter(currency => currency.id === item).length === 0) {\n\t\t\tres[id] = data[id];\n\t\t}\n\t});\n\n\treturn res;\n}\n\nfunction getMountedOptions(data, settings) {\n\tconst options = Object.keys(data)\n\t\t.map(item => createOption(data[item], settings))\n\t\t.sort((a,b) => a.dataset.name < b.dataset.name ? -1 : 1);\n\tconst wrapper = document.createDocumentFragment();\n\n\toptions.forEach(item => wrapper.appendChild(item));\n\n\treturn wrapper;\n}\n\nfunction createOption(item, settings={}) {\n\tconst el = document.createElement('option');\n\n\tel.value = item.id;\n\tel.id = item.id;\n\tel.dataset.name = item.currencyName;\n\n\tif (settings.isShort) {\n\t\tel.innerText = item.id;\n\t} else {\n\t\tel.innerText = `${item.currencyName} (${item.id})`;\n\t}\n\n\tif (item[settings.selectPosition]) {\n\t\tel.selected = true;\n\t} else {\n\t\tel.selected = false;\n\t}\n\n\treturn el;\n}\n\nfunction saveAddCurrency() {\n\tconst usedCurrencies = getData(usedCurrenciesKey) || initialUsedCurrencies;\n\tconst newCurrency = addCurrencySelect[addCurrencySelect.selectedIndex];\n\tconst newCurrencies = [...usedCurrencies];\n\n\tnewCurrencies.push({\n\t\tid: newCurrency.id,\n\t\tcurrencyName: newCurrency.innerText\n\t})\n\n\tsaveData(usedCurrenciesKey, newCurrencies);\n\tsetCurrenciesSelectors();\n\tmountAllCurrencies();\n\ttoggleMenu();\n}\n\nfunction setInitialCurrencies() {\n\tsaveData(usedCurrenciesKey, null);\n\tmountAllCurrencies();\n\tsetCurrenciesSelectors();\n\ttoggleMenu();\n}"]}